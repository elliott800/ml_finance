# Task: 2 - Dependency Cleanup

## Goal

Make dependency management reproducible and remove typos and obsolete packages.

## Priority

- Level: High
- Rationale: Reproducible dependencies reduce breakage and security risk.

## Owner & Estimated effort

- Owner: Maintainer / dev
- Estimated effort: 1–3 hours

## Roadmap (example)

- Week 1 — Short-term goals

  - Audit `requirements.txt` and fix typos/incorrect names.
  - Identify research-only dependencies and move them to `requirements-legacy.txt`.

- Week 2 — Mid-term goals

  - Pin stable versions and verify installs in a clean virtualenv.
  - Add a README note describing `requirements-legacy.txt` usage.

- Week 3–4 — Longer-term goals
  - Add `pyproject.toml` and optionally a lockfile workflow (`poetry` or `pip-tools`).
  - Add CI checks to ensure reproducible installs.

### Quick wins (1–2 days)

- Fix obvious package name typos in `requirements.txt`.
- Add a short README note describing `requirements-legacy.txt` usage.

### Medium projects (1–2 weeks)

- Pin versions for all production dependencies and verify installs in a clean virtualenv.
- Document the dependency update policy (minor vs major, testing before bump).

### Longer projects (3–8+ weeks)

- Introduce a reproducible lockfile (`poetry.lock` or `requirements.txt` generated by `pip-tools`) and CI checks to
  ensure dependency installations succeed.

## Validation

- Fresh virtualenv install of pinned `requirements.txt` completes successfully.
- `requirements-legacy.txt` contains explanatory comments for optional or legacy packages.

## Acceptance criteria

- [ ] `requirements.txt` has no obvious typos and installs in a clean env.
- [ ] Optional legacy deps are documented in `requirements-legacy.txt`.
- [ ] CI verifies dependency installation (or a plan exists to add it).

## Notes

- Avoid bumping everything at once; prefer small, tested upgrades.
- Consider `pip-audit` in CI for security scanning.

## Implementation hints

- Files to change: `requirements.txt`, optionally `pyproject.toml`, and CI workflow files.
- Steps:
  - Manually inspect `requirements.txt` for typos and unused entries.
  - Use a clean virtualenv to `pip install -r requirements.txt` and fix packages that fail to install.
  - Pin versions using `pip-compile` (`pip-tools`) or `poetry lock` and commit the lockfile.
  - Add a CI job that verifies `pip install -r requirements.txt` (or `poetry install`) succeeds on a clean runner.
- Commands to validate: create a new virtualenv and `pip install -r requirements.txt`.
